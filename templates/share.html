{% extends "_base.html" %}

{% block contents %}
  <form action="" method="post" class="">
    <div class="">
      <label for="text">Enter your voice</label>
      <input type="text" name="text" id="text" required>
    </div>
    <div>
      <label id="location-x" for="loc-x">GPS x-coordinate: </label>
      <input id="loc-x" type=number name=loc-x required readonly>
    </div>
    <div>
      <label id="location-y" for="loc-y">GPS y-coordinate: </label>
      <input id="loc-y" type=number name=loc-y required readonly>
    </div>
    <div>
      <button id="location-button" type="button" onclick="readCurrentPosition()">
        Get Your Position
      </button>
    </div>
    <div class="form-example">
      <input id="button-submit" type="submit" value="Share!" disabled>
    </div>
  </form>

{% endblock %}


{% block scripts %}
  <script>
    function readCurrentPosition() {
      if (!navigator.geolocation) { 
        showErrorAlert("Geolocation is not supported by this browser."); return;
      }
      
      navigator.geolocation.getCurrentPosition(
          position => {
            $("input#loc-x").val(position.coords.latitude);
            $("input#loc-y").val(position.coords.longitude);
            $("input#button-submit").removeAttr("disabled");
          }, 
          error => showErrorAlert(error.message)
      );
    } 
  </script>
{% endblock %}